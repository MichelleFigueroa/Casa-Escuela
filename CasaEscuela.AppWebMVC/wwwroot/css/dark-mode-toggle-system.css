/* ============================================
   DARK MODE TOGGLE SYSTEM 
   ============================================ */

/* Variables CSS para dark mode */
body.dark-mode,
html.dark-mode-loading {
    --bg-primary: #081028;
    --bg-secondary: #0b1739;
    --bg-tertiary: #0b1739;
    --text-primary: #e4e4e7;
    --text-secondary: #a1a1aa;
    --accent-color: #cb3cff;
    --border-color: #343b4f;
    --hover-bg: #1e293b;
}

/* Aplicar dark mode a html también para evitar flash */
html.dark-mode-loading {
    background-color: var(--bg-primary) !important;
}

/* Variables para light mode (opcional, usa los colores por defecto) */
body:not(.dark-mode) {
    --bg-primary: #ffffff;
    --bg-secondary: #f8f9fa;
    --bg-tertiary: #e9ecef;
    --text-primary: #212529;
    --text-secondary: #6c757d;
    --border-color: #dee2e6;
    --accent-color: #0d6efd;
    --hover-bg: #e9ecef;
}

/* Toggle button styling */
.theme-toggle-btn {
    position: relative;
    width: 60px;
    height: 30px;
    background-color: var(--border-color);
    border-radius: 30px;
    cursor: pointer;
    transition: background-color 0.3s;
    border: none;
    padding: 0;
}

body.dark-mode .theme-toggle-btn {
    background-color: var(--accent-color);
}

.theme-toggle-btn::before {
    content: '';
    position: absolute;
    width: 24px;
    height: 24px;
    border-radius: 50%;
    background-color: white;
    top: 3px;
    left: 3px;
    transition: transform 0.3s;
}

body.dark-mode .theme-toggle-btn::before {
    transform: translateX(30px);
}

.theme-toggle-icon {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    font-size: 14px;
    transition: opacity 0.3s;
}

    .theme-toggle-icon.sun {
        left: 8px;
        opacity: 1;
    }

    .theme-toggle-icon.moon {
        right: 8px;
        opacity: 0.5;
    }

body.dark-mode .theme-toggle-icon.sun {
    opacity: 0.5;
}

body.dark-mode .theme-toggle-icon.moon {
    opacity: 1;
}

/* ============================================
   DARK MODE STYLES
   ============================================ */

/* Fondo general */
body.dark-mode,
body.dark-mode .pc-container,
body.dark-mode .pc-content {
    background-color: var(--bg-primary) !important;
    color: var(--text-primary) !important;
}

    /* Sidebar */
    body.dark-mode .pc-sidebar {
        background-color: var(--bg-secondary) !important;
        border-right: 1px solid var(--border-color) !important;
    }

        body.dark-mode .pc-sidebar .navbar-content,
        body.dark-mode .pc-sidebar .m-header {
            background-color: var(--bg-secondary) !important;
        }

        body.dark-mode .pc-sidebar .navbar-wrapper {
            background-color: var(--bg-secondary) !important;
        }

        /* Links del sidebar - mantener estructura original */
        body.dark-mode .pc-sidebar .pc-link,
        body.dark-mode .pc-sidebar a {
            color: var(--text-primary) !important;
        }

            body.dark-mode .pc-sidebar .pc-link:hover,
            body.dark-mode .pc-sidebar a:hover {
                background-color: var(--hover-bg) !important;
                color: var(--accent-color) !important;
            }

        /* Iconos del sidebar */
        body.dark-mode .pc-sidebar i {
            color: var(--text-primary) !important;
        }

        body.dark-mode .pc-sidebar .pc-link:hover i,
        body.dark-mode .pc-sidebar a:hover i {
            color: var(--accent-color) !important;
        }

        /* Link activo */
        body.dark-mode .pc-sidebar .pc-link.active,
        body.dark-mode .pc-sidebar .active > a {
            background-color: rgba(59, 130, 246, 0.1) !important;
            color: var(--accent-color) !important;
        }

            body.dark-mode .pc-sidebar .pc-link.active i,
            body.dark-mode .pc-sidebar .active > a i {
                color: var(--accent-color) !important;
            }

        /* Submenu - mantener estructura sin modificar padding o margin */
        body.dark-mode .pc-sidebar .pc-submenu {
            background-color: transparent !important;
        }

            body.dark-mode .pc-sidebar .pc-submenu li a {
                color: var(--text-secondary) !important;
            }

                body.dark-mode .pc-sidebar .pc-submenu li a:hover {
                    background-color: var(--hover-bg) !important;
                    color: var(--accent-color) !important;
                }

                body.dark-mode .pc-sidebar .pc-submenu li a i {
                    color: var(--text-secondary) !important;
                }

                body.dark-mode .pc-sidebar .pc-submenu li a:hover i {
                    color: var(--accent-color) !important;
                }

        /* Brand/Logo */
        body.dark-mode .pc-sidebar .b-brand {
            color: var(--text-primary) !important;
        }

        body.dark-mode .pc-sidebar .m-header {
            border-bottom: 1px solid var(--border-color) !important;
        }

        /* Texto del menú */
        body.dark-mode .pc-sidebar span {
            color: inherit !important;
        }

    /* Header */
    body.dark-mode .pc-header {
        background-color: var(--bg-secondary) !important;
        border-bottom: 1px solid var(--border-color) !important;
    }

        body.dark-mode .pc-header .pc-head-link {
            color: var(--text-primary) !important;
        }

            body.dark-mode .pc-header .pc-head-link:hover {
                background-color: var(--hover-bg) !important;
            }

    /* Cards */
    body.dark-mode .card {
        background-color: var(--bg-secondary) !important;
        border: 1px solid var(--border-color) !important;
        color: var(--text-primary) !important;
    }

    body.dark-mode .card-header {
        background-color: var(--bg-tertiary) !important;
        border-bottom: 1px solid var(--border-color) !important;
        color: var(--text-primary) !important;
    }

    body.dark-mode .card-body,
    body.dark-mode .card-footer {
        background-color: var(--bg-secondary) !important;
        color: var(--text-primary) !important;
    }

    /* Tablas */
    body.dark-mode .table {
        color: var(--text-primary) !important;
        background-color: var(--bg-secondary) !important;
    }

        body.dark-mode .table thead th {
            background-color: var(--bg-tertiary) !important;
            color: var(--text-primary) !important;
            border-color: var(--border-color) !important;
        }

        body.dark-mode .table tbody tr {
            background-color: var(--bg-secondary) !important;
            border-color: var(--border-color) !important;
        }

            body.dark-mode .table tbody tr:hover {
                background-color: var(--hover-bg) !important;
            }

        body.dark-mode .table td,
        body.dark-mode .table th {
            border-color: var(--border-color) !important;
        }

    /* DataTables específico */
    body.dark-mode .dataTables_wrapper {
        color: var(--text-primary) !important;
    }

        body.dark-mode .dataTables_wrapper .dataTables_length,
        body.dark-mode .dataTables_wrapper .dataTables_filter,
        body.dark-mode .dataTables_wrapper .dataTables_info,
        body.dark-mode .dataTables_wrapper .dataTables_paginate {
            color: var(--text-primary) !important;
        }

            body.dark-mode .dataTables_wrapper .dataTables_paginate .paginate_button {
                color: var(--text-primary) !important;
                background-color: var(--bg-secondary) !important;
                border: 1px solid var(--border-color) !important;
            }

                body.dark-mode .dataTables_wrapper .dataTables_paginate .paginate_button:hover {
                    background-color: var(--hover-bg) !important;
                    color: var(--accent-color) !important;
                }

                body.dark-mode .dataTables_wrapper .dataTables_paginate .paginate_button.current {
                    background-color: var(--accent-color) !important;
                    color: white !important;
                }

    /* Forms */
    body.dark-mode .form-control,
    body.dark-mode .form-select {
        background-color: var(--bg-tertiary) !important;
        border-color: var(--border-color) !important;
        color: var(--text-primary) !important;
    }

        body.dark-mode .form-control:focus,
        body.dark-mode .form-select:focus {
            background-color: var(--bg-tertiary) !important;
            border-color: var(--accent-color) !important;
            color: var(--text-primary) !important;
            box-shadow: 0 0 0 0.2rem rgba(59, 130, 246, 0.25) !important;
        }

        body.dark-mode .form-control::placeholder {
            color: var(--text-secondary) !important;
        }

    body.dark-mode .form-label {
        color: var(--text-primary) !important;
    }

    /* Select2 */
    body.dark-mode .select2-container--default .select2-selection--single {
        background-color: var(--bg-tertiary) !important;
        border-color: var(--border-color) !important;
    }

        body.dark-mode .select2-container--default .select2-selection--single .select2-selection__rendered {
            color: var(--text-primary) !important;
        }

    body.dark-mode .select2-dropdown {
        background-color: var(--bg-secondary) !important;
        border-color: var(--border-color) !important;
    }

    body.dark-mode .select2-container--default .select2-results__option {
        background-color: var(--bg-secondary) !important;
        color: var(--text-primary) !important;
    }

    body.dark-mode .select2-container--default .select2-results__option--highlighted {
        background-color: var(--hover-bg) !important;
        color: var(--accent-color) !important;
    }

    body.dark-mode .select2-search__field {
        background-color: var(--bg-tertiary) !important;
        border-color: var(--border-color) !important;
        color: var(--text-primary) !important;
    }

    /* Bootstrap Select */
    body.dark-mode .bootstrap-select .dropdown-toggle {
        background-color: var(--bg-tertiary) !important;
        border-color: var(--border-color) !important;
        color: var(--text-primary) !important;
    }

    body.dark-mode .bootstrap-select .dropdown-menu {
        background-color: var(--bg-secondary) !important;
    }

    body.dark-mode .bootstrap-select .dropdown-item {
        color: var(--text-primary) !important;
    }

        body.dark-mode .bootstrap-select .dropdown-item:hover {
            background-color: var(--hover-bg) !important;
        }

    /* Modales */
    body.dark-mode .modal-content {
        background-color: var(--bg-secondary) !important;
        border: 1px solid var(--border-color) !important;
    }

    body.dark-mode .modal-header {
        background-color: var(--bg-tertiary) !important;
        border-bottom: 1px solid var(--border-color) !important;
    }

        body.dark-mode .modal-header .modal-title {
            color: var(--text-primary) !important;
        }

    body.dark-mode .modal-body {
        color: var(--text-primary) !important;
    }

    body.dark-mode .modal-footer {
        border-top: 1px solid var(--border-color) !important;
    }

    body.dark-mode .btn-close {
        filter: invert(1) grayscale(100%) brightness(200%);
    }

    /* Botones */
    body.dark-mode .btn-secondary {
        background-color: var(--bg-tertiary) !important;
        border-color: var(--border-color) !important;
        color: var(--text-primary) !important;
    }

    body.dark-mode .btn-outline-secondary {
        color: var(--text-primary) !important;
        border-color: var(--border-color) !important;
    }

        body.dark-mode .btn-outline-secondary:hover {
            background-color: var(--bg-tertiary) !important;
        }

    /* Dropdowns */
    body.dark-mode .dropdown-menu {
        background-color: var(--bg-secondary) !important;
        border: 1px solid var(--border-color) !important;
    }

    body.dark-mode .dropdown-item {
        color: var(--text-primary) !important;
    }

        body.dark-mode .dropdown-item:hover,
        body.dark-mode .dropdown-item:focus {
            background-color: var(--hover-bg) !important;
            color: var(--accent-color) !important;
        }

    body.dark-mode .dropdown-divider {
        border-color: var(--border-color) !important;
    }

    body.dark-mode .dropdown-header {
        color: var(--text-primary) !important;
    }

    /* Navegación */
    body.dark-mode .nav-tabs {
        border-bottom: 1px solid var(--border-color) !important;
    }

        body.dark-mode .nav-tabs .nav-link {
            color: var(--text-secondary) !important;
        }

            body.dark-mode .nav-tabs .nav-link.active {
                background-color: var(--bg-secondary) !important;
                border-color: var(--border-color) !important;
                color: var(--accent-color) !important;
            }

    /* Badges */
    body.dark-mode .badge {
        background-color: var(--bg-tertiary) !important;
        color: var(--text-primary) !important;
    }

    /* Alerts */
    body.dark-mode .alert {
        background-color: var(--bg-tertiary) !important;
        border-color: var(--border-color) !important;
        color: var(--text-primary) !important;
    }

    /* Footer */
    body.dark-mode .pc-footer {
        background-color: var(--bg-secondary) !important;
        border-top: 1px solid var(--border-color) !important;
        color: var(--text-primary) !important;
    }

    /* Breadcrumb */
    body.dark-mode .breadcrumb-item,
    body.dark-mode .breadcrumb-item a {
        color: var(--text-secondary) !important;
    }

        body.dark-mode .breadcrumb-item.active {
            color: var(--text-primary) !important;
        }

    /* Scrollbar personalizado */
    body.dark-mode ::-webkit-scrollbar {
        width: 10px;
        height: 10px;
    }

    body.dark-mode ::-webkit-scrollbar-track {
        background: var(--bg-tertiary);
    }

    body.dark-mode ::-webkit-scrollbar-thumb {
        background: var(--border-color);
        border-radius: 5px;
    }

        body.dark-mode ::-webkit-scrollbar-thumb:hover {
            background: var(--text-secondary);
        }

    /* Texto general */
    body.dark-mode h1,
    body.dark-mode h2,
    body.dark-mode h3,
    body.dark-mode h4,
    body.dark-mode h5,
    body.dark-mode h6,
    body.dark-mode p,
    body.dark-mode span,
    body.dark-mode label {
        color: var(--text-primary) !important;
    }

    body.dark-mode .text-muted {
        color: var(--text-secondary) !important;
    }

    /* Inputs de búsqueda de DataTables */
    body.dark-mode .dataTables_filter input {
        background-color: var(--bg-tertiary) !important;
        border: 1px solid var(--border-color) !important;
        color: var(--text-primary) !important;
    }

    /* Paginación */
    body.dark-mode .pagination .page-item .page-link {
        background-color: var(--bg-secondary) !important;
        border-color: var(--border-color) !important;
        color: var(--text-primary) !important;
    }

    body.dark-mode .pagination .page-item.active .page-link {
        background-color: var(--accent-color) !important;
        border-color: var(--accent-color) !important;
    }

    body.dark-mode .pagination .page-item .page-link:hover {
        background-color: var(--hover-bg) !important;
    }

    /* List group */
    body.dark-mode .list-group-item {
        background-color: var(--bg-secondary) !important;
        border-color: var(--border-color) !important;
        color: var(--text-primary) !important;
    }

        body.dark-mode .list-group-item:hover {
            background-color: var(--hover-bg) !important;
        }

    /* Progress bars */
    body.dark-mode .progress {
        background-color: var(--bg-tertiary) !important;
    }

    /* Tooltips */
    body.dark-mode .tooltip-inner {
        background-color: var(--bg-tertiary) !important;
        color: var(--text-primary) !important;
    }

    body.dark-mode .popover {
        background-color: var(--bg-secondary) !important;
        border-color: var(--border-color) !important;
    }

    body.dark-mode .popover-body {
        color: var(--text-primary) !important;
    }

    /* Inputs de tipo number, date, etc */
    body.dark-mode input[type="text"],
    body.dark-mode input[type="number"],
    body.dark-mode input[type="date"],
    body.dark-mode input[type="email"],
    body.dark-mode input[type="password"],
    body.dark-mode input[type="tel"],
    body.dark-mode input[type="search"],
    body.dark-mode textarea {
        background-color: var(--bg-tertiary) !important;
        border-color: var(--border-color) !important;
        color: var(--text-primary) !important;
    }

    /* Labels y textos en general */
    body.dark-mode label,
    body.dark-mode .form-label,
    body.dark-mode .col-form-label {
        color: var(--text-primary) !important;
    }

    /* Títulos de secciones */
    body.dark-mode .card-title,
    body.dark-mode .modal-title,
    body.dark-mode h1, body.dark-mode h2,
    body.dark-mode h3, body.dark-mode h4,
    body.dark-mode h5, body.dark-mode h6 {
        color: var(--text-primary) !important;
    }

    /* Texto pequeño y muted */
    body.dark-mode small,
    body.dark-mode .small,
    body.dark-mode .text-muted {
        color: var(--text-secondary) !important;
    }

    /* Checkboxes y radios */
    body.dark-mode .form-check-input {
        background-color: var(--bg-tertiary) !important;
        border-color: var(--border-color) !important;
    }

        body.dark-mode .form-check-input:checked {
            background-color: var(--accent-color) !important;
            border-color: var(--accent-color) !important;
        }

    body.dark-mode .form-check-label {
        color: var(--text-primary) !important;
    }

    /* Disabled inputs */
    body.dark-mode .form-control:disabled,
    body.dark-mode .form-select:disabled {
        background-color: var(--bg-tertiary) !important;
        opacity: 0.6;
        color: var(--text-secondary) !important;
    }

    /* Readonly inputs */
    body.dark-mode .form-control[readonly] {
        background-color: var(--bg-tertiary) !important;
        color: var(--text-secondary) !important;
    }

    /* Input groups */
    body.dark-mode .input-group-text {
        background-color: var(--bg-tertiary) !important;
        border-color: var(--border-color) !important;
        color: var(--text-primary) !important;
    }

    /* Botones en general - mantener colores originales pero ajustar el contraste */
    body.dark-mode .btn-success {
        background-color: #10b981 !important;
        border-color: #10b981 !important;
        color: white !important;
    }

    body.dark-mode .btn-danger {
        background-color: #ef4444 !important;
        border-color: #ef4444 !important;
        color: white !important;
    }

    body.dark-mode .btn-warning {
        background-color: #f59e0b !important;
        border-color: #f59e0b !important;
        color: white !important;
    }

    body.dark-mode .btn-info {
        background-color: #06b6d4 !important;
        border-color: #06b6d4 !important;
        color: white !important;
    }

    body.dark-mode .btn-light {
        background-color: var(--bg-tertiary) !important;
        border-color: var(--border-color) !important;
        color: var(--text-primary) !important;
    }

    body.dark-mode .btn-dark {
        background-color: var(--bg-primary) !important;
        border-color: var(--border-color) !important;
        color: var(--text-primary) !important;
    }

    /* Textarea específico */
    body.dark-mode textarea.form-control {
        background-color: var(--bg-tertiary) !important;
        border-color: var(--border-color) !important;
        color: var(--text-primary) !important;
    }

    /* Dividers */
    body.dark-mode hr {
        border-color: var(--border-color) !important;
        opacity: 1;
    }

    /* Tables - más específico */
    body.dark-mode table {
        color: var(--text-primary) !important;
    }

        body.dark-mode table thead {
            background-color: var(--bg-tertiary) !important;
        }

            body.dark-mode table thead th {
                color: var(--text-primary) !important;
                background-color: var(--bg-tertiary) !important;
            }

        body.dark-mode table tbody td {
            color: var(--text-primary) !important;
            background-color: var(--bg-secondary) !important;
        }

    body.dark-mode .table-striped tbody tr:nth-of-type(odd) {
        background-color: var(--bg-tertiary) !important;
    }

    body.dark-mode .table-hover tbody tr:hover {
        background-color: var(--hover-bg) !important;
    }

    /* Borders en elementos */
    body.dark-mode .border,
    body.dark-mode .border-top,
    body.dark-mode .border-bottom,
    body.dark-mode .border-start,
    body.dark-mode .border-end {
        border-color: var(--border-color) !important;
    }

    /* Wells, panels y contenedores */
    body.dark-mode .well,
    body.dark-mode .panel,
    body.dark-mode .jumbotron {
        background-color: var(--bg-secondary) !important;
        color: var(--text-primary) !important;
    }

    /* Links dentro de cards */
    body.dark-mode .card a {
        color: var(--accent-color) !important;
    }

        body.dark-mode .card a:hover {
            color: var(--text-primary) !important;
        }

    /* Elementos con background blanco por defecto */
    body.dark-mode [class*="bg-white"] {
        background-color: var(--bg-secondary) !important;
    }

    body.dark-mode [class*="bg-light"] {
        background-color: var(--bg-tertiary) !important;
    }

    /* Text colors override */
    body.dark-mode .text-dark {
        color: var(--text-primary) !important;
    }

    body.dark-mode .text-body {
        color: var(--text-primary) !important;
    }

    /* Sombras */
    body.dark-mode .shadow,
    body.dark-mode .shadow-sm,
    body.dark-mode .shadow-lg {
        box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.5) !important;
    }

    /* Overlay oscuro para modales */
    body.dark-mode .modal-backdrop {
        background-color: #000 !important;
    }

        body.dark-mode .modal-backdrop.show {
            opacity: 0.7 !important;
        }

    /* Iconos - asegurar que sean visibles */
    body.dark-mode i,
    body.dark-mode .fa,
    body.dark-mode .fas,
    body.dark-mode .far,
    body.dark-mode .ti {
        color: var(--text-primary) !important;
    }

    /* Iconos dentro de botones - mantener color del botón */
    body.dark-mode .btn i {
        color: inherit !important;
    }

    /* Row separators */
    body.dark-mode .row + .row {
        border-top-color: var(--border-color) !important;
    }

    /* Code blocks */
    body.dark-mode code,
    body.dark-mode pre {
        background-color: var(--bg-tertiary) !important;
        color: var(--text-primary) !important;
        border-color: var(--border-color) !important;
    }

    /* Blockquotes */
    body.dark-mode blockquote {
        border-left-color: var(--border-color) !important;
        color: var(--text-secondary) !important;
    }

    /* Captions */
    body.dark-mode caption {
        color: var(--text-secondary) !important;
    }

    /* Figure captions */
    body.dark-mode figcaption {
        color: var(--text-secondary) !important;
    }

    /* ============================================
   ESTILOS ESPECÍFICOS PARA FORMULARIOS Y VISTAS
   ============================================ */

    /* Menu hamburguesa y botones de header */
    body.dark-mode .pc-head-link {
        color: var(--text-primary) !important;
        background-color: transparent !important;
    }

        body.dark-mode .pc-head-link:hover {
            background-color: var(--hover-bg) !important;
            color: var(--text-primary) !important;
        }

        body.dark-mode .pc-head-link i {
            color: var(--text-primary) !important;
        }

    /* Botón del menú hamburguesa específicamente */
    body.dark-mode #sidebar-hide,
    body.dark-mode #mobile-collapse {
        color: var(--text-primary) !important;
    }

        body.dark-mode #sidebar-hide i,
        body.dark-mode #mobile-collapse i {
            color: var(--text-primary) !important;
        }

    /* Avatar y perfil de usuario */
    body.dark-mode .user-avtar,
    body.dark-mode .fa-user-circle {
        color: var(--text-primary) !important;
    }

    /* Dropdown del perfil */
    body.dark-mode .dropdown-user-profile {
        background-color: var(--bg-secondary) !important;
    }

        body.dark-mode .dropdown-user-profile .dropdown-header {
            background-color: var(--bg-tertiary) !important;
            border-bottom: 1px solid var(--border-color) !important;
        }

        body.dark-mode .dropdown-user-profile h4,
        body.dark-mode .dropdown-user-profile span {
            color: var(--text-primary) !important;
        }

    /* Contenedores de formulario */
    body.dark-mode .row,
    body.dark-mode .col,
    body.dark-mode [class*="col-"] {
        color: var(--text-primary) !important;
    }

    /* Todos los spans y divs con texto */
    body.dark-mode span:not(.badge):not(.btn *),
    body.dark-mode div:not(.card):not(.modal):not(.dropdown-menu) {
        color: var(--text-primary) !important;
    }

    /* Headers de tablas más visibles */
    body.dark-mode .table thead,
    body.dark-mode table thead,
    body.dark-mode thead {
        background-color: rgba(30, 41, 59, 0.8) !important;
        border-bottom: 2px solid var(--border-color) !important;
    }

        body.dark-mode .table thead th,
        body.dark-mode table thead th,
        body.dark-mode thead th {
            color: var(--text-primary) !important;
            font-weight: 600 !important;
            border-color: var(--border-color) !important;
        }

    /* Celdas de tabla */
    body.dark-mode .table td,
    body.dark-mode table td,
    body.dark-mode tbody td {
        color: var(--text-primary) !important;
        border-color: var(--border-color) !important;
    }

    body.dark-mode .table tbody tr,
    body.dark-mode table tbody tr,
    body.dark-mode tbody tr {
        background-color: var(--bg-secondary) !important;
    }

        /* Hover en filas de tabla */
        body.dark-mode .table tbody tr:hover,
        body.dark-mode table tbody tr:hover,
        body.dark-mode tbody tr:hover {
            background-color: var(--hover-bg) !important;
        }

    /* Inputs dentro de tablas */
    body.dark-mode table input,
    body.dark-mode .table input {
        background-color: var(--bg-tertiary) !important;
        border-color: var(--border-color) !important;
        color: var(--text-primary) !important;
    }

    /* Botones de agregar/más */
    body.dark-mode .btn-primary,
    body.dark-mode button.btn-primary {
        background-color: var(--accent-color) !important;
        border-color: var(--accent-color) !important;
        color: white !important;
    }

        body.dark-mode .btn-primary:hover {
            background-color: #2563eb !important;
            border-color: #2563eb !important;
        }

        /* Iconos dentro de botones primarios */
        body.dark-mode .btn-primary i,
        body.dark-mode button.btn-primary i {
            color: white !important;
        }

    /* Select/dropdown dentro de formularios */
    body.dark-mode select,
    body.dark-mode select.form-control,
    body.dark-mode select.form-select {
        background-color: var(--bg-tertiary) !important;
        border-color: var(--border-color) !important;
        color: var(--text-primary) !important;
        background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%23e4e4e7' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M2 5l6 6 6-6'/%3e%3c/svg%3e") !important;
    }

        /* Options dentro de select */
        body.dark-mode select option {
            background-color: var(--bg-secondary) !important;
            color: var(--text-primary) !important;
        }

    /* Textos de totales y resúmenes */
    body.dark-mode .text-end,
    body.dark-mode .text-right {
        color: var(--text-primary) !important;
    }

    /* Etiquetas de totales */
    body.dark-mode strong,
    body.dark-mode b {
        color: var(--text-primary) !important;
    }

    /* Áreas de texto de solo lectura */
    body.dark-mode .form-control-plaintext {
        color: var(--text-primary) !important;
    }

    /* Elementos resaltados */
    body.dark-mode mark,
    body.dark-mode .mark {
        background-color: rgba(251, 191, 36, 0.3) !important;
        color: var(--text-primary) !important;
    }

    /* Inputs de archivo */
    body.dark-mode input[type="file"] {
        color: var(--text-primary) !important;
    }

        body.dark-mode input[type="file"]::file-selector-button {
            background-color: var(--bg-tertiary) !important;
            border-color: var(--border-color) !important;
            color: var(--text-primary) !important;
        }

    /* Secciones y divisiones */
    body.dark-mode section,
    body.dark-mode article,
    body.dark-mode aside {
        background-color: transparent !important;
        color: var(--text-primary) !important;
    }

    /* Listas */
    body.dark-mode ul,
    body.dark-mode ol,
    body.dark-mode dl {
        color: var(--text-primary) !important;
    }

    body.dark-mode li {
        color: var(--text-primary) !important;
    }

    /* Definiciones */
    body.dark-mode dt {
        color: var(--text-primary) !important;
    }

    body.dark-mode dd {
        color: var(--text-secondary) !important;
    }

    /* Placeholders más visibles */
    body.dark-mode ::placeholder {
        color: var(--text-secondary) !important;
        opacity: 0.7 !important;
    }

    body.dark-mode :-ms-input-placeholder {
        color: var(--text-secondary) !important;
    }

    body.dark-mode ::-ms-input-placeholder {
        color: var(--text-secondary) !important;
    }

    /* Focus state para inputs */
    body.dark-mode .form-control:focus,
    body.dark-mode .form-select:focus,
    body.dark-mode input:focus,
    body.dark-mode textarea:focus,
    body.dark-mode select:focus {
        background-color: var(--bg-tertiary) !important;
        border-color: var(--accent-color) !important;
        color: var(--text-primary) !important;
        box-shadow: 0 0 0 0.2rem rgba(59, 130, 246, 0.25) !important;
    }

    /* Botones outline */
    body.dark-mode .btn-outline-primary {
        color: var(--accent-color) !important;
        border-color: var(--accent-color) !important;
    }

        body.dark-mode .btn-outline-primary:hover {
            background-color: var(--accent-color) !important;
            color: white !important;
        }

    body.dark-mode .btn-outline-secondary {
        color: var(--text-primary) !important;
        border-color: var(--border-color) !important;
    }

        body.dark-mode .btn-outline-secondary:hover {
            background-color: var(--bg-tertiary) !important;
            color: var(--text-primary) !important;
        }

    /* Formularios inline */
    body.dark-mode .form-inline .form-control {
        background-color: var(--bg-tertiary) !important;
        color: var(--text-primary) !important;
    }

    /* Grid y flex containers */
    body.dark-mode .d-flex,
    body.dark-mode .d-grid {
        color: var(--text-primary) !important;
    }

    /* Encabezados de sección */
    body.dark-mode .section-title,
    body.dark-mode .page-title,
    body.dark-mode .form-title {
        color: var(--text-primary) !important;
    }

    /* Botón de cancelar */
    body.dark-mode .btn-secondary,
    body.dark-mode button.btn-secondary {
        background-color: var(--bg-tertiary) !important;
        border-color: var(--border-color) !important;
        color: var(--text-primary) !important;
    }

        body.dark-mode .btn-secondary:hover {
            background-color: var(--hover-bg) !important;
        }

        body.dark-mode .btn-secondary i {
            color: var(--text-primary) !important;
        }

    /* Sección de totales y resumen */
    body.dark-mode .text-primary {
        color: var(--accent-color) !important;
    }

    /* Evitar que los textos de los campos se vuelvan azules */
    body.dark-mode .form-control.text-primary {
        color: var(--text-primary) !important;
    }

    body.dark-mode input.text-primary,
    body.dark-mode textarea.text-primary,
    body.dark-mode select.text-primary {
        color: var(--text-primary) !important;
    }

    /* Labels que no deben ser azules */
    body.dark-mode label.text-primary {
        color: var(--text-primary) !important;
    }

    /* Spans dentro de formularios que no deben ser azules */
    body.dark-mode .form-group .text-primary,
    body.dark-mode .row .text-primary:not(a) {
        color: var(--text-primary) !important;
    }

    /* Mantener solo los links en azul */
    body.dark-mode a.text-primary {
        color: var(--accent-color) !important;
    }

        body.dark-mode a.text-primary:hover {
            color: #2563eb !important;
        }

    /* Área de totales y resumen de factura/documento */
    body.dark-mode .bg-light {
        background-color: var(--bg-tertiary) !important;
    }

    body.dark-mode .bg-white {
        background-color: var(--bg-secondary) !important;
    }

        /* Textos dentro de áreas de totales */
        body.dark-mode .bg-light *,
        body.dark-mode .bg-white * {
            color: var(--text-primary) !important;
        }

        /* Campos de solo lectura o deshabilitados en totales */
        body.dark-mode .bg-light input[readonly],
        body.dark-mode .bg-white input[readonly] {
            background-color: transparent !important;
            border: none !important;
            color: var(--text-primary) !important;
        }

    /* Checkboxes */
    body.dark-mode input[type="checkbox"] {
        accent-color: var(--accent-color);
        background-color: var(--bg-tertiary) !important;
        border: 1px solid var(--border-color) !important;
    }

    /* Radio buttons */
    body.dark-mode input[type="radio"] {
        accent-color: var(--accent-color);
    }

    /* Botones con clase text-primary */
    body.dark-mode .btn.text-primary {
        color: white !important;
    }

    /* Asegurar que los botones mantengan su color correcto */
    body.dark-mode .btn-primary *,
    body.dark-mode .btn-success *,
    body.dark-mode .btn-danger *,
    body.dark-mode .btn-warning *,
    body.dark-mode .btn-info * {
        color: white !important;
    }

    /* Corregir iconos en botones */
    body.dark-mode .btn i,
    body.dark-mode button i {
        color: inherit !important;
    }

    /* Específico para el botón de crear */
    body.dark-mode .btn-primary i,
    body.dark-mode button.btn-primary i {
        color: white !important;
    }

    /* Links del sidebar */
    body.dark-mode .pc-sidebar a {
        color: var(--text-primary) !important;
        text-decoration: none !important;
    }

        body.dark-mode .pc-sidebar a:hover {
            color: var(--accent-color) !important;
        }

    /* Logo y brand */
    body.dark-mode .b-brand {
        color: var(--accent-color) !important;
    }

    /* Elementos de navegación del sidebar - ELIMINADO duplicado */

    /* ============================================
   ÁREA DE TOTALES Y RESUMEN
   ============================================ */

    /* Contenedor de totales */
    body.dark-mode .totals-section,
    body.dark-mode .summary-section,
    body.dark-mode [class*="total"],
    body.dark-mode [class*="summary"] {
        background-color: var(--bg-secondary) !important;
    }

    /* Forzar background oscuro en elementos comunes de totales */
    body.dark-mode div[style*="background"],
    body.dark-mode div[style*="background-color"] {
        background-color: var(--bg-secondary) !important;
    }

    /* Cualquier div con clase que contenga "bg-" */
    body.dark-mode [class*="bg-"] {
        background-color: var(--bg-secondary) !important;
    }

        body.dark-mode [class*="bg-"] * {
            color: var(--text-primary) !important;
        }

    /* Contenedores flex y grid dentro de formularios */
    body.dark-mode .d-flex,
    body.dark-mode .d-grid,
    body.dark-mode [class*="flex"],
    body.dark-mode [class*="grid"] {
        background-color: transparent !important;
    }

    /* Inputs de solo lectura en áreas de totales */
    body.dark-mode input[readonly],
    body.dark-mode input[disabled],
    body.dark-mode .form-control[readonly],
    body.dark-mode .form-control[disabled] {
        background-color: var(--bg-tertiary) !important;
        color: var(--text-secondary) !important;
        border-color: var(--border-color) !important;
        opacity: 0.8;
    }

    /* Texto de monedas y valores */
    body.dark-mode .currency,
    body.dark-mode .amount,
    body.dark-mode .total-amount {
        color: var(--text-primary) !important;
    }

    /* Separadores y bordes */
    body.dark-mode .border,
    body.dark-mode .border-top,
    body.dark-mode .border-bottom {
        border-color: var(--border-color) !important;
    }

    /* Contenedor principal de contenido */
    body.dark-mode .pc-content {
        background-color: var(--bg-primary) !important;
    }

    /* Cualquier div sin clase específica */
    body.dark-mode div:not([class]) {
        color: var(--text-primary) !important;
    }

    /* Panels y wells */
    body.dark-mode .panel,
    body.dark-mode .well,
    body.dark-mode .panel-body {
        background-color: var(--bg-secondary) !important;
        border-color: var(--border-color) !important;
    }

    /* ============================================
   AUTOCOMPLETE Y SUGERENCIAS
   ============================================ */

    /* Contenedor de autocomplete */
    body.dark-mode .ui-autocomplete,
    body.dark-mode .autocomplete-suggestions,
    body.dark-mode .ui-menu {
        background-color: var(--bg-secondary) !important;
        border: 1px solid var(--border-color) !important;
        color: var(--text-primary) !important;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3) !important;
    }

        /* Items del autocomplete */
        body.dark-mode .ui-autocomplete .ui-menu-item,
        body.dark-mode .autocomplete-suggestion,
        body.dark-mode .ui-menu-item {
            background-color: var(--bg-secondary) !important;
            color: var(--text-primary) !important;
            border-bottom: 1px solid var(--border-color) !important;
            padding: 8px 12px !important;
        }

            /* Hover en items de autocomplete */
            body.dark-mode .ui-autocomplete .ui-menu-item:hover,
            body.dark-mode .autocomplete-suggestion:hover,
            body.dark-mode .ui-menu-item:hover,
            body.dark-mode .ui-state-focus,
            body.dark-mode .ui-state-active {
                background-color: var(--hover-bg) !important;
                color: var(--accent-color) !important;
                cursor: pointer;
            }

    /* Link dentro del autocomplete */
    body.dark-mode .ui-menu-item-wrapper {
        color: var(--text-primary) !important;
        display: block !important;
    }

        body.dark-mode .ui-menu-item-wrapper:hover {
            color: var(--accent-color) !important;
        }

    /* jQuery UI autocomplete específico */
    body.dark-mode .ui-widget-content {
        background-color: var(--bg-secondary) !important;
        color: var(--text-primary) !important;
        border-color: var(--border-color) !important;
    }

    body.dark-mode .ui-widget-header {
        background-color: var(--bg-tertiary) !important;
        color: var(--text-primary) !important;
        border-color: var(--border-color) !important;
    }

    /* Texto dentro del autocomplete */
    body.dark-mode .ui-menu .ui-menu-item div {
        color: var(--text-primary) !important;
    }

    /* ============================================
   BOTONES ESPECIALES
   ============================================ */

    /* Botón de buscar (verde) */
    body.dark-mode .btn-success,
    body.dark-mode button.btn-success,
    body.dark-mode a.btn-success {
        background-color: #10b981 !important;
        border-color: #10b981 !important;
        color: white !important;
    }

        body.dark-mode .btn-success:hover {
            background-color: #059669 !important;
            border-color: #059669 !important;
        }

        body.dark-mode .btn-success i,
        body.dark-mode .btn-success * {
            color: white !important;
        }

    /* Botón anular (naranja/warning) */
    body.dark-mode .btn-warning,
    body.dark-mode button.btn-warning,
    body.dark-mode a.btn-warning {
        background-color: #f59e0b !important;
        border-color: #f59e0b !important;
        color: white !important;
    }

        body.dark-mode .btn-warning:hover {
            background-color: #d97706 !important;
            border-color: #d97706 !important;
        }

        body.dark-mode .btn-warning i,
        body.dark-mode .btn-warning * {
            color: white !important;
        }

    /* Botón de acción (cyan/info) */
    body.dark-mode .btn-info,
    body.dark-mode button.btn-info,
    body.dark-mode a.btn-info {
        background-color: #06b6d4 !important;
        border-color: #06b6d4 !important;
        color: white !important;
    }

        body.dark-mode .btn-info:hover {
            background-color: #0891b2 !important;
            border-color: #0891b2 !important;
        }

        body.dark-mode .btn-info i,
        body.dark-mode .btn-info * {
            color: white !important;
        }

    /* Botón con ícono de búsqueda */
    body.dark-mode button[type="button"].btn-primary,
    body.dark-mode .btn-primary.btn {
        background-color: var(--accent-color) !important;
        border-color: var(--accent-color) !important;
        color: white !important;
    }

    /* Input de búsqueda en header de tabla */
    body.dark-mode .search-input,
    body.dark-mode input[placeholder*="Buscar"],
    body.dark-mode input[placeholder*="buscar"] {
        background-color: var(--bg-tertiary) !important;
        border-color: var(--border-color) !important;
        color: var(--text-primary) !important;
    }

    /* Títulos de sección con ícono */
    body.dark-mode .section-title,
    body.dark-mode h3, body.dark-mode h4 {
        color: var(--text-primary) !important;
    }

        body.dark-mode .section-title i,
        body.dark-mode h3 i, body.dark-mode h4 i {
            color: var(--text-primary) !important;
        }

    /* ============================================
   PLACEHOLDERS DE FECHA
   ============================================ */

    body.dark-mode input[type="date"]::-webkit-calendar-picker-indicator {
        filter: invert(1);
        opacity: 0.7;
    }

    body.dark-mode input[type="date"]:hover::-webkit-calendar-picker-indicator {
        opacity: 1;
    }

    body.dark-mode input[type="time"]::-webkit-calendar-picker-indicator {
        filter: invert(1);
        opacity: 0.7;
    }

    /* Placeholder de inputs de fecha */
    body.dark-mode input[type="date"],
    body.dark-mode input[type="time"],
    body.dark-mode input[type="datetime-local"] {
        color-scheme: dark;
    }

    /* ============================================
   SUBMENU EXPANDIDO
   ============================================ */

    /* Estilos ya definidos arriba en la sección de Sidebar */

    /* ============================================
   INPUTS CON ICONOS
   ============================================ */

    body.dark-mode .input-group {
        background-color: transparent !important;
    }

        body.dark-mode .input-group .form-control {
            background-color: var(--bg-tertiary) !important;
            border-color: var(--border-color) !important;
            color: var(--text-primary) !important;
        }

    body.dark-mode .input-group-prepend,
    body.dark-mode .input-group-append {
        background-color: transparent !important;
    }

    body.dark-mode .input-group-text {
        background-color: var(--bg-tertiary) !important;
        border-color: var(--border-color) !important;
        color: var(--text-primary) !important;
    }

        body.dark-mode .input-group-text i {
            color: var(--text-primary) !important;
        }

    /* ============================================
   DATEPICKER
   ============================================ */

    body.dark-mode .datepicker,
    body.dark-mode .ui-datepicker {
        background-color: var(--bg-secondary) !important;
        border-color: var(--border-color) !important;
        color: var(--text-primary) !important;
    }

        body.dark-mode .datepicker table,
        body.dark-mode .ui-datepicker table {
            color: var(--text-primary) !important;
        }

        body.dark-mode .datepicker td,
        body.dark-mode .ui-datepicker td {
            color: var(--text-primary) !important;
        }

        body.dark-mode .datepicker .active,
        body.dark-mode .ui-datepicker .ui-state-active {
            background-color: var(--accent-color) !important;
            color: white !important;
        }

/* Transición suave */
body {
    transition: background-color 0.3s ease, color 0.3s ease;
}

.card, .table, .form-control, .modal-content {
    transition: background-color 0.3s ease, border-color 0.3s ease, color 0.3s ease;
}

